<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Aertronic Lite IDF Documentation: C:/Users/Hammurabi.Sierra/Documents/GIT/AERtronic_Lite_2.0/ESP-IDF/Aertronic_Lite/main/system.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Aertronic Lite IDF Documentation<span id="projectnumber">&#160;2.6.0</span>
   </div>
   <div id="projectbrief">Documentation for Aertronic Lite 2.0 ESP-IDF based project</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('system_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">system.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="system_8h_source.html">system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="setup_8h_source.html">setup.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="serial__send_8h_source.html">serial_send.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sensors_8h_source.html">sensors.h</a>&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="nvs__manager_8h_source.html">nvs_manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utils_8h_source.html">utils.h</a>&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;<a class="el" href="pages_8h_source.html">pages.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="time__manager_8h_source.html">time_manager.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for system.c:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c__incl.png" border="0" usemap="#a_c_1_2_users_2_hammurabi_8_sierra_2_documents_2_g_i_t_2_a_e_rtronic___lite__2_80_2_e_s_p-_i_d_f_2_aertronic___lite_2main_2system_8c" loading="lazy" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a43f5e0d6db0fb41a437cc9096b32e9b5" id="r_a43f5e0d6db0fb41a437cc9096b32e9b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a43f5e0d6db0fb41a437cc9096b32e9b5">system_init</a> (void)</td></tr>
<tr class="memdesc:a43f5e0d6db0fb41a437cc9096b32e9b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the system.  <br /></td></tr>
<tr class="memitem:a3f45cb82b07f9844b825d73f091413a7" id="r_a3f45cb82b07f9844b825d73f091413a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f45cb82b07f9844b825d73f091413a7">operation_time</a> (void)</td></tr>
<tr class="memdesc:a3f45cb82b07f9844b825d73f091413a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the operation time.  <br /></td></tr>
<tr class="memitem:add779b9d830853ab883651b998ad43d8" id="r_add779b9d830853ab883651b998ad43d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add779b9d830853ab883651b998ad43d8">store_system_event</a> (int type, int sensor_index)</td></tr>
<tr class="memdesc:add779b9d830853ab883651b998ad43d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores a system event in the event log.  <br /></td></tr>
<tr class="memitem:a012f23b509b22ea369b2f708e3d15330" id="r_a012f23b509b22ea369b2f708e3d15330"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a012f23b509b22ea369b2f708e3d15330">update_system_status</a> (<a class="el" href="structsensor__data__t.html">sensor_data_t</a> *data)</td></tr>
<tr class="memdesc:a012f23b509b22ea369b2f708e3d15330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the system status based on sensor data.  <br /></td></tr>
<tr class="memitem:a97ec9415a474734bbfe4819763f72c3f" id="r_a97ec9415a474734bbfe4819763f72c3f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97ec9415a474734bbfe4819763f72c3f">update_header</a> (void)</td></tr>
<tr class="memdesc:a97ec9415a474734bbfe4819763f72c3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the header on the Nextion display.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8a41b8d5ae95b81f5b1ff677783a40dc" id="r_a8a41b8d5ae95b81f5b1ff677783a40dc"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a41b8d5ae95b81f5b1ff677783a40dc">system_state</a> = 0</td></tr>
<tr class="memdesc:a8a41b8d5ae95b81f5b1ff677783a40dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer to store the system's state.  <br /></td></tr>
<tr class="memitem:a2ef5919214974cb155ce0f62aec2c46f" id="r_a2ef5919214974cb155ce0f62aec2c46f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ef5919214974cb155ce0f62aec2c46f">operation_minutes</a> = 0</td></tr>
<tr class="memdesc:a2ef5919214974cb155ce0f62aec2c46f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer to store the system's operation time in minutes since the last reboot.  <br /></td></tr>
<tr class="memitem:afefba2969f86ee117cf53a6709050a21" id="r_afefba2969f86ee117cf53a6709050a21"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afefba2969f86ee117cf53a6709050a21">operation_hours</a> = 0</td></tr>
<tr class="memdesc:afefba2969f86ee117cf53a6709050a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer to store the system's operation time in hours since the last reboot.  <br /></td></tr>
<tr class="memitem:aae68550ad38d9fd2a74d96a4f6efdc54" id="r_aae68550ad38d9fd2a74d96a4f6efdc54"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae68550ad38d9fd2a74d96a4f6efdc54">boot_count</a> = 0</td></tr>
<tr class="memdesc:aae68550ad38d9fd2a74d96a4f6efdc54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer to keep track of the number of system reboots.  <br /></td></tr>
<tr class="memitem:a10a3fa33bae024190264a8321128a41d" id="r_a10a3fa33bae024190264a8321128a41d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a10a3fa33bae024190264a8321128a41d">system_language</a> = 0</td></tr>
<tr class="memdesc:a10a3fa33bae024190264a8321128a41d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer to store the system's language.  <br /></td></tr>
<tr class="memitem:a30436bd24c155c7ff8b58f89cc4907d9" id="r_a30436bd24c155c7ff8b58f89cc4907d9"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a30436bd24c155c7ff8b58f89cc4907d9">system_color</a> = 0</td></tr>
<tr class="memdesc:a30436bd24c155c7ff8b58f89cc4907d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer to store the system's color.  <br /></td></tr>
<tr class="memitem:a792282433d9feffdd90742acc4b7cf84" id="r_a792282433d9feffdd90742acc4b7cf84"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a792282433d9feffdd90742acc4b7cf84">maintenance_minutes</a> = 0</td></tr>
<tr class="memdesc:a792282433d9feffdd90742acc4b7cf84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer to store the minutes the system has been in operation since commissioning.  <br /></td></tr>
<tr class="memitem:a7935be2326bd362ec59592d133232a12" id="r_a7935be2326bd362ec59592d133232a12"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7935be2326bd362ec59592d133232a12">maintenance_hours</a> = 0</td></tr>
<tr class="memdesc:a7935be2326bd362ec59592d133232a12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer to store the hours the system has been in operation since commissioning.  <br /></td></tr>
<tr class="memitem:aa828b108037b528aa15a5dc2bbf20195" id="r_aa828b108037b528aa15a5dc2bbf20195"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa828b108037b528aa15a5dc2bbf20195">number_of_maintenances</a> = 0</td></tr>
<tr class="memdesc:aa828b108037b528aa15a5dc2bbf20195"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer to store the number of maintenances performed.  <br /></td></tr>
<tr class="memitem:a059052b01f9d0d07827ac4a6829daff9" id="r_a059052b01f9d0d07827ac4a6829daff9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a059052b01f9d0d07827ac4a6829daff9">acknowledged</a> = false</td></tr>
<tr class="memdesc:a059052b01f9d0d07827ac4a6829daff9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boolean to indicate if the user has acknowledged a warning or alarm.  <br /></td></tr>
<tr class="memitem:aa6e9c9788e43b630369a07406e64b47e" id="r_aa6e9c9788e43b630369a07406e64b47e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6e9c9788e43b630369a07406e64b47e">warning_or_alarm_occurred</a> = false</td></tr>
<tr class="memdesc:aa6e9c9788e43b630369a07406e64b47e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boolean to indicate if a warning or alarm has occurred.  <br /></td></tr>
<tr class="memitem:a0aa958ac5a7c712b3ea2f61fd27268be" id="r_a0aa958ac5a7c712b3ea2f61fd27268be"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0aa958ac5a7c712b3ea2f61fd27268be">warning_or_alarm_active</a> = false</td></tr>
<tr class="memdesc:a0aa958ac5a7c712b3ea2f61fd27268be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boolean to indicate if a warning or alarm is currently active.  <br /></td></tr>
<tr class="memitem:a9b9864a018686c986b17d57495766f24" id="r_a9b9864a018686c986b17d57495766f24"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9b9864a018686c986b17d57495766f24">attributes</a> [4]</td></tr>
<tr class="memdesc:a9b9864a018686c986b17d57495766f24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of integers to store the values of the header components.  <br /></td></tr>
<tr class="memitem:aa96758e46e482f01d8cc7baf87a6ee8b" id="r_aa96758e46e482f01d8cc7baf87a6ee8b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa96758e46e482f01d8cc7baf87a6ee8b">operation_seconds</a> = 0</td></tr>
</table>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a3f45cb82b07f9844b825d73f091413a7" name="a3f45cb82b07f9844b825d73f091413a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f45cb82b07f9844b825d73f091413a7">&#9670;&#160;</a></span>operation_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void operation_time </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the operation time. </p>
<p>This function updates the operation time by incrementing the seconds, minutes, and hours based on the system's uptime. It also handles the rollover of seconds to minutes and minutes to hours. This function does not return any value. </p><dl class="section note"><dt>Note</dt><dd>This function should be called periodically to keep track of the system's operation time. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ernesto Estrada </dd></dl>
<dl class="section date"><dt>Date</dt><dd>June 16, 2025 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c_a3f45cb82b07f9844b825d73f091413a7_cgraph.png" border="0" usemap="#asystem_8c_a3f45cb82b07f9844b825d73f091413a7_cgraph" loading="lazy" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c_a3f45cb82b07f9844b825d73f091413a7_icgraph.png" border="0" usemap="#asystem_8c_a3f45cb82b07f9844b825d73f091413a7_icgraph" loading="lazy" alt=""/></div>
</div>

</div>
</div>
<a id="add779b9d830853ab883651b998ad43d8" name="add779b9d830853ab883651b998ad43d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add779b9d830853ab883651b998ad43d8">&#9670;&#160;</a></span>store_system_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void store_system_event </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sensor_index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores a system event in the event log. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The type of event to store (e.g., 0 for normal, 1 for warning, 2 for alarm). </td></tr>
    <tr><td class="paramname">sensor_index</td><td>The index of the sensor that triggered the event (0 for pressure sensor 1, 1 for pressure sensor 2, 2 for temperature sensor).</td></tr>
  </table>
  </dd>
</dl>
<p>This function logs the event type and the sensor index that triggered the event. It is used to keep track of system events for diagnostics and monitoring purposes. </p><dl class="section note"><dt>Note</dt><dd>This function should be called whenever a significant event occurs in the system, such as a warning or alarm condition. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ernesto Estrada </dd></dl>
<dl class="section date"><dt>Date</dt><dd>June 19, 2025 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Ensure that the sensor_index is valid (0, 1, or 2) to avoid out-of-bounds access. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c_add779b9d830853ab883651b998ad43d8_cgraph.png" border="0" usemap="#asystem_8c_add779b9d830853ab883651b998ad43d8_cgraph" loading="lazy" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c_add779b9d830853ab883651b998ad43d8_icgraph.png" border="0" usemap="#asystem_8c_add779b9d830853ab883651b998ad43d8_icgraph" loading="lazy" alt=""/></div>
</div>

</div>
</div>
<a id="a43f5e0d6db0fb41a437cc9096b32e9b5" name="a43f5e0d6db0fb41a437cc9096b32e9b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43f5e0d6db0fb41a437cc9096b32e9b5">&#9670;&#160;</a></span>system_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void system_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the system. </p>
<p>This function initializes the system by setting up the necessary components such as UART, NVS, and display. It also waits for the Nextion display to be ready and for a valid date/time string to be received. </p><dl class="section note"><dt>Note</dt><dd>This function should be called at the beginning of the main application to ensure all components are ready for use. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ernesto Estrada </dd></dl>
<dl class="section date"><dt>Date</dt><dd>June 16, 2025 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c_a43f5e0d6db0fb41a437cc9096b32e9b5_cgraph.png" border="0" usemap="#asystem_8c_a43f5e0d6db0fb41a437cc9096b32e9b5_cgraph" loading="lazy" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c_a43f5e0d6db0fb41a437cc9096b32e9b5_icgraph.png" border="0" usemap="#asystem_8c_a43f5e0d6db0fb41a437cc9096b32e9b5_icgraph" loading="lazy" alt=""/></div>
</div>

</div>
</div>
<a id="a97ec9415a474734bbfe4819763f72c3f" name="a97ec9415a474734bbfe4819763f72c3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97ec9415a474734bbfe4819763f72c3f">&#9670;&#160;</a></span>update_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_header </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the header on the Nextion display. </p>
<p>This function updates the header on the Nextion display to reflect the current system state. It updates the title color, status color, slider picture, and icon state based on the system state. </p><dl class="section note"><dt>Note</dt><dd>This function should be called whenever the system state changes or periodically to keep the display updated. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ernesto Estrada </dd></dl>
<dl class="section date"><dt>Date</dt><dd>June 18, 2025 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function should not be called directly; it is intended to be used as a FreeRTOS task or called from the main application loop. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c_a97ec9415a474734bbfe4819763f72c3f_cgraph.png" border="0" usemap="#asystem_8c_a97ec9415a474734bbfe4819763f72c3f_cgraph" loading="lazy" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c_a97ec9415a474734bbfe4819763f72c3f_icgraph.png" border="0" usemap="#asystem_8c_a97ec9415a474734bbfe4819763f72c3f_icgraph" loading="lazy" alt=""/></div>
</div>

</div>
</div>
<a id="a012f23b509b22ea369b2f708e3d15330" name="a012f23b509b22ea369b2f708e3d15330"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a012f23b509b22ea369b2f708e3d15330">&#9670;&#160;</a></span>update_system_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t update_system_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsensor__data__t.html">sensor_data_t</a> *</td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the system status based on sensor data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Pointer to the <a class="el" href="structsensor__data__t.html">sensor_data_t</a> structure containing the latest sensor readings.</td></tr>
  </table>
  </dd>
</dl>
<p>This function updates the global system state based on the provided sensor data. It checks the pressure and temperature readings to determine if the system is in a normal, warning, or alarm state. It also updates the acknowledged status and warning/alarm flags based on the sensor readings. </p><dl class="section return"><dt>Returns</dt><dd>Returns an integer indicating the system state:<ul>
<li>0: Normal</li>
<li>1: Warning</li>
<li>2: Alarm </li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function should be called whenever new sensor data is available to keep the system status updated. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ernesto Estrada </dd></dl>
<dl class="section date"><dt>Date</dt><dd>June 17, 2025 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c_a012f23b509b22ea369b2f708e3d15330_cgraph.png" border="0" usemap="#asystem_8c_a012f23b509b22ea369b2f708e3d15330_cgraph" loading="lazy" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="system_8c_a012f23b509b22ea369b2f708e3d15330_icgraph.png" border="0" usemap="#asystem_8c_a012f23b509b22ea369b2f708e3d15330_icgraph" loading="lazy" alt=""/></div>
</div>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="a059052b01f9d0d07827ac4a6829daff9" name="a059052b01f9d0d07827ac4a6829daff9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a059052b01f9d0d07827ac4a6829daff9">&#9670;&#160;</a></span>acknowledged</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool acknowledged = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Boolean to indicate if the user has acknowledged a warning or alarm. </p>
<p>This variable is used to track if the user has acknowledged a warning or alarm in the system. </p>

</div>
</div>
<a id="a9b9864a018686c986b17d57495766f24" name="a9b9864a018686c986b17d57495766f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b9864a018686c986b17d57495766f24">&#9670;&#160;</a></span>attributes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int attributes[4]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Array of integers to store the values of the header components. </p>
<p>This array is used to store the values of the header components such as title color, status color, slider picture, and icon state. It is used to update the header display on the Nextion screen based on the current system state. </p>

</div>
</div>
<a id="aae68550ad38d9fd2a74d96a4f6efdc54" name="aae68550ad38d9fd2a74d96a4f6efdc54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae68550ad38d9fd2a74d96a4f6efdc54">&#9670;&#160;</a></span>boot_count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t boot_count = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer to keep track of the number of system reboots. </p>

</div>
</div>
<a id="a7935be2326bd362ec59592d133232a12" name="a7935be2326bd362ec59592d133232a12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7935be2326bd362ec59592d133232a12">&#9670;&#160;</a></span>maintenance_hours</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t maintenance_hours = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer to store the hours the system has been in operation since commissioning. </p>
<p>This variable is used to track the hours of operation for maintenance purposes. </p>

</div>
</div>
<a id="a792282433d9feffdd90742acc4b7cf84" name="a792282433d9feffdd90742acc4b7cf84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a792282433d9feffdd90742acc4b7cf84">&#9670;&#160;</a></span>maintenance_minutes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t maintenance_minutes = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer to store the minutes the system has been in operation since commissioning. </p>
<p>This variable is used to track the minutes of operation for maintenance purposes. </p>

</div>
</div>
<a id="aa828b108037b528aa15a5dc2bbf20195" name="aa828b108037b528aa15a5dc2bbf20195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa828b108037b528aa15a5dc2bbf20195">&#9670;&#160;</a></span>number_of_maintenances</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t number_of_maintenances = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer to store the number of maintenances performed. </p>

</div>
</div>
<a id="afefba2969f86ee117cf53a6709050a21" name="afefba2969f86ee117cf53a6709050a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afefba2969f86ee117cf53a6709050a21">&#9670;&#160;</a></span>operation_hours</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t operation_hours = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer to store the system's operation time in hours since the last reboot. </p>

</div>
</div>
<a id="a2ef5919214974cb155ce0f62aec2c46f" name="a2ef5919214974cb155ce0f62aec2c46f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ef5919214974cb155ce0f62aec2c46f">&#9670;&#160;</a></span>operation_minutes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t operation_minutes = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer to store the system's operation time in minutes since the last reboot. </p>

</div>
</div>
<a id="aa96758e46e482f01d8cc7baf87a6ee8b" name="aa96758e46e482f01d8cc7baf87a6ee8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa96758e46e482f01d8cc7baf87a6ee8b">&#9670;&#160;</a></span>operation_seconds</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int operation_seconds = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a30436bd24c155c7ff8b58f89cc4907d9" name="a30436bd24c155c7ff8b58f89cc4907d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30436bd24c155c7ff8b58f89cc4907d9">&#9670;&#160;</a></span>system_color</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t system_color = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer to store the system's color. </p>
<p>0 = Light mode, 1 = Dark mode. </p>

</div>
</div>
<a id="a10a3fa33bae024190264a8321128a41d" name="a10a3fa33bae024190264a8321128a41d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10a3fa33bae024190264a8321128a41d">&#9670;&#160;</a></span>system_language</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t system_language = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer to store the system's language. </p>
<p>0 = English, 1 = Spanish, 2 = Portuguese, 3 = French, 4 = German. </p>

</div>
</div>
<a id="a8a41b8d5ae95b81f5b1ff677783a40dc" name="a8a41b8d5ae95b81f5b1ff677783a40dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a41b8d5ae95b81f5b1ff677783a40dc">&#9670;&#160;</a></span>system_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t system_state = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer to store the system's state. </p>
<p>0 = Normal, 1 = Warning, 2 = Alarm. This variable is used to track the current state of the system based on sensor readings and operational conditions. </p>

</div>
</div>
<a id="a0aa958ac5a7c712b3ea2f61fd27268be" name="a0aa958ac5a7c712b3ea2f61fd27268be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0aa958ac5a7c712b3ea2f61fd27268be">&#9670;&#160;</a></span>warning_or_alarm_active</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool warning_or_alarm_active = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Boolean to indicate if a warning or alarm is currently active. </p>
<p>This variable is used to track if a warning or alarm is currently active in the system. It is set to true when a warning or alarm is acknowledged and can be used to control the display of notifications or alerts. </p>

</div>
</div>
<a id="aa6e9c9788e43b630369a07406e64b47e" name="aa6e9c9788e43b630369a07406e64b47e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6e9c9788e43b630369a07406e64b47e">&#9670;&#160;</a></span>warning_or_alarm_occurred</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool warning_or_alarm_occurred = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Boolean to indicate if a warning or alarm has occurred. </p>
<p>This variable is used to track if any warning or alarm has occurred in the system. It is set to true when a warning or alarm is triggered and can be used to display notifications or alerts. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_e8e4440a445d67237a740adba4a68a1c.html">Aertronic_Lite</a></li><li class="navelem"><a href="dir_f57453039bf2bf89d6d620fcffdb993c.html">main</a></li><li class="navelem"><a href="system_8c.html">system.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
